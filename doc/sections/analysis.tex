

\chapter{Systemanalyse}
\section{Systemkontextdiagramm}



\begin{figure}[H]
	\begin{tikzpicture}[node distance=5]
		\node [draw, rectangle, drop shadow, fill=white] (F) {Fahrzeug};
		\node [draw, circle, drop shadow, fill=white, text width=3cm, align=center] (C) [below right=of F] {Server};
		\node [draw, rectangle, drop shadow, fill=white] (S) [below right=of C] {Sensor};
		
		\node (ctrl1) [above=of S] {};
		\node (ctrl2) [above right=of C] {};
		\node (ctrl3) [right=of C] {};
	%	\node (ctrl4) [above right=of S] {};
		\node (ctrl5) [left=of C] {};
		\node (ctrl6) [below=of ctrl5] {};
		
		%
		% Fahrzeug -> Server
		%
		\path[draw, -{Latex[scale=2.0]}, dashed] (F)
				edge [bend right] node [fill=white] {GeoFence verlassen} (C)
				edge [bend left]  node [fill=white] {GeoFence betreten} (C);
				
		%
		% Server -> Fahrzeug
		%
		\path[draw, -{Latex[scale=2.0]}] (C)
				edge node [fill=white] {Fusions-Algorithmus Ergebnis} (F);
				
		
		%
		% Sensor -> Server
		%		
		\path[draw, -{Latex[scale=2.0]}, dashed] (S)
			edge [bend left]  node [fill=white] {GeoFence betreten} (C);
		\path[draw, -{Latex[scale=2.0]}] (S)
			edge node [fill=white] {Sensordaten} (C);
				
		%
		% Server -> Fahrzeug
		%
		\path[draw, -{Latex[scale=2.0]}, dashed] (C)
			edge [bend left] node [fill=white] {Wecken} (S)
			.. controls (ctrl1) and (ctrl3) ..  node [fill=white] {Pausieren} (S);
				
				
		
		\path[draw, -{Latex[scale=2.0]}] (4, -8) -- (.5, -8) node [pos=.5, above] {Datenfluss};
		\path[draw, -{Latex[scale=2.0]}, dashed] (4, -9) -- (.5, -9) node [pos=.5, above] {Kontrollfluss};
			
	\end{tikzpicture}
	\centering
	\label{system_context}
	\caption{Systemkontextdiagramm}
\end{figure}

\section{Komponentendiagramm oder sowas?}
\section{Use Case Diagramme}
\todo{was wirklich umgesetzt sein wird}

\begin{figure}[H]
	\begin{tikzpicture}[node distance=5]
		\begin{umlsystem}{Server}
			\umlusecase[y=2]{GeoFence betreten}
			\umlusecase[y=0]{GeoFence verlassen}
		\end{umlsystem}
		\umlactor[x=-5,y=1]{Fahrzeug}
		\umlactor[x=5,y=1]{Sensor}
		\umlassoc{Fahrzeug}{usecase-1}
		\umlassoc{Fahrzeug}{usecase-2}
		\umlassoc{Sensor}{usecase-1}
	\end{tikzpicture}
	\centering
	\label{use_case:car}
	\caption{Use Case Diagramm für den Server}
\end{figure}


\begin{figure}[H]
	\begin{tikzpicture}[node distance=5]
		\begin{umlsystem}{Sensor}
			\umlusecase[y=0]{Pausieren}
			\umlusecase[y=2]{Wecken}
		\end{umlsystem} 
		\umlactor[x=-5,y=1]{Server}
		\umlassoc{Server}{usecase-1}
		\umlassoc{Server}{usecase-2} 
	\end{tikzpicture}
	\centering
	\label{use_case:server}
	\caption{Use Case Diagramm des Servers gegenüber dem Sensor}
\end{figure}


\section{Schnitstellenanalyse}
\todo{erwartetes verhalten der sensoren und fahrzeuge}

